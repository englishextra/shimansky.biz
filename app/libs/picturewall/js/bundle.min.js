(function(f){f.console||(f.console={});f=f.console;for(var g,e=function(){},b=["memory"],a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");g=b.pop();)f[g]||(f[g]={});for(;g=a.pop();)f[g]||(f[g]=e);g=g=e=b=a=null})("undefined"!==typeof window?window:this);
(function(f,g){var e={create:function(b,a,c,d){var k=this;k.dataAttributeHighresName=c||"highres";k.dataAttributeLowresName=d||"lowres";e.resize(b.children);b.classList.remove("loading");b.addEventListener("click",function(){k.children&&0<k.children.length&&e.shrink(k.children[0])});for(c=0;c<b.children.length;c++)b.children[c].addEventListener("click",e.animate);a&&e.keys(b)},keys:function(b){var a=function(a){if(!a.defaultPrevented){var d=b||g.getElementsByClassName("zoomwall lightbox")[0];if(d)switch(a.keyCode){case 27:d.children&&
0<d.children.length&&e.shrink(d.children[0]);a.preventDefault();break;case 37:e.page(d,!1);a.preventDefault();break;case 39:e.page(d,!0),a.preventDefault()}}};g.addEventListener("keydown",a);return a},resizeRow:function(b,a){if(b&&1<b.length)for(var c in b)b.hasOwnProperty(c)&&(b[c].style.width=parseInt(f.getComputedStyle(b[c]).width,10)/a*100+"%",b[c].style.height="auto")},calcRowWidth:function(b){var a=0,c;for(c in b)b.hasOwnProperty(c)&&(a+=parseInt(f.getComputedStyle(b[c]).width,10));return a},
resize:function(b){for(var a=[],c=-1,d=0;d<b.length;d++){var k=b[d];k&&(-1==c?c=k.offsetTop:k.offsetTop!=c&&(e.resizeRow(a,e.calcRowWidth(a)),a=[],c=k.offsetTop),a.push(k))}e.resizeRow(a,e.calcRowWidth(a))},reset:function(b){b.style.transform="translate(0, 0) scale(1)";b.style.webkitTransform="translate(0, 0) scale(1)";b.classList.remove("active")},shrink:function(b){b.parentNode.classList.remove("lightbox");e.reset(b);for(var a=b.previousElementSibling;a;)e.reset(a),a=a.previousElementSibling;for(a=
b.nextElementSibling;a;)e.reset(a),a=a.nextElementSibling;b.dataset.lowres&&(b.src=b.dataset.lowres)},expand:function(b){b.classList.add("active");b.parentNode.classList.add("lightbox");var a=f.getComputedStyle(b.parentNode),c=parseInt(a.width,10),d=parseInt(a.height,10),k=b.parentNode.getBoundingClientRect().top,a=f.getComputedStyle(b),l=parseInt(a.width,10),g=parseInt(a.height,10),e=f.innerHeight;d<f.innerHeight?e=d:0<k&&(e-=k);b.dataset[this.dataAttributeHighresName]&&(b.src!=b.dataset[this.dataAttributeHighresName]&&
void 0===b.dataset[this.dataAttributeLowresName]&&(b.dataset[this.dataAttributeLowresName]=b.src),b.src=b.dataset[this.dataAttributeHighresName]);var h=[];h.push(b);for(a=b.nextElementSibling;a&&a.offsetTop==b.offsetTop;)h.push(a),a=a.nextElementSibling;for(a=b.previousElementSibling;a&&a.offsetTop==b.offsetTop;)h.unshift(a),a=a.previousElementSibling;a=e/g;l*a>c&&(a=c/l);var m=k-b.parentNode.offsetTop+b.offsetTop;if(d<f.innerHeight||g*a<d)m-=e/2-g*a/2;0<k&&(m-=k);for(d=k=0;d<h.length&&h[d]!=b;d++)k+=
parseInt(f.getComputedStyle(h[d]).width,10)*a;k=c/2-l*a/2-k;d=0;for(e=h.length-1;0<=e&&h[e]!=b;e--)d+=parseInt(f.getComputedStyle(h[e]).width,10)*a;d=c/2-l*a/2-d;for(l=c=b=0;l<h.length;l++){b+=c*a-c;var c=parseInt(f.getComputedStyle(h[l]).width,10),e=(b+k)/c*100,n=-m/parseInt(f.getComputedStyle(h[l]).height,10)*100;h[l].style.transformOrigin="0% 0%";h[l].style.webkitTransformOrigin="0% 0%";h[l].style.transform="translate("+e.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")";h[l].style.webkitTransform=
"translate("+e.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")"}for(var g=g*(a-1)-m,q,c=b=0,l=h[h.length-1].nextElementSibling,e=-1;l;){n=l.offsetTop;n==e?b+=c*a-c:(-1!=e&&(b=0,g+=q*(a-1)),e=n);c=parseInt(f.getComputedStyle(l).width,10);q=parseInt(f.getComputedStyle(l).height,10);var n=(b+k)/c*100,t=g/q*100;l.style.transformOrigin="0% 0%";l.style.webkitTransformOrigin="0% 0%";l.style.transform="translate("+n.toFixed(8)+"%, "+t.toFixed(8)+"%) scale("+a.toFixed(8)+")";l.style.webkitTransform=
"translate("+n.toFixed(8)+"%, "+t.toFixed(8)+"%) scale("+a.toFixed(8)+")";l=l.nextElementSibling}q=-m;c=b=0;h=h[0].previousElementSibling;for(m=-1;h;)k=h.offsetTop,k==m?b-=c*a-c:(b=0,q-=parseInt(f.getComputedStyle(h).height,10)*(a-1),m=k),c=parseInt(f.getComputedStyle(h).width,10),k=(b-d)/c*100,g=q/parseInt(f.getComputedStyle(h).height,10)*100,h.style.transformOrigin="100% 0%",h.style.webkitTransformOrigin="100% 0%",h.style.transform="translate("+k.toFixed(8)+"%, "+g.toFixed(8)+"%) scale("+a.toFixed(8)+
")",h.style.webkitTransform="translate("+k.toFixed(8)+"%, "+g.toFixed(8)+"%) scale("+a.toFixed(8)+")",h=h.previousElementSibling},animate:function(b){if(this.classList.contains("active"))e.shrink(this);else{for(var a=this.parentNode.getElementsByClassName("active"),c=0;c<a.length;c++)a[c].classList.remove("active");e.expand(this)}b.stopPropagation()},page:function(b,a){var c=b.getElementsByClassName("active");if(c&&0<c.length){var c=c[0],d;if(d=a?c.nextElementSibling:c.previousElementSibling)c.classList.remove("active"),
c.dataset.lowres&&(c.src=c.dataset.lowres),e.expand(d)}}};f.zoomwall=e})("undefined"!==typeof window?window:this,document);
(function(f,g){f.echo=function(e,b,a){e=e||"data-src-img";b=b||"src";a=a||100;var c=function(a){this.elem=a;this.render();this.listen()},d=g.documentElement.classList.contains("is-binded-echo")||"",k=[],l=function(){for(var a=0;a<k.length;a++){var c=k[a],d=c.getBoundingClientRect();if((0<=d.top&&0<=d.left&&d.top)<=(f.innerHeight||g.documentElement.clientHeight)){var d=c,e=a;-1!==k.indexOf(c)&&k.splice(e,1);d.src=d.dataset[b]||d.getAttribute("data-"+b)}}},p=function(a,b){function c(){g=0;l=+new Date;
e=a.apply(d,k);k=d=null}var d,k,e,g,l=0;return function(){d=this;k=arguments;var a=new Date-l;g||(a>=b?c():g=setTimeout(c,b-a));return e}}(l,a),r=function(){var a=!1;try{var b=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});f.addEventListener("test",function(){},b)}catch(c){}return a}();c.prototype={init:function(){k.push(this.elem)},render:function(){l()},listen:function(){d||(f.addEventListener("scroll",p,r?{passive:!0}:!1),g.documentElement.classList.add("is-binded-echo"))}};
var h=g.getElementsByClassName(e)||"";h&&function(){for(var a=0;a<h.length;a++)(new c(h[a])).init()}()}})("undefined"!==typeof window?window:this,document);(function(f,g){f.doesFontExist=function(e){var b=g.createElement("canvas").getContext("2d");b.font="72px monospace";var a=b.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width;b.font="72px '"+e+"', monospace";return b.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width==a?!1:!0}})("undefined"!==typeof window?window:this,document);
(function(f,g){f.loadJsCss=function(e,b){var a=this;a.files=e;a.js=[];a.head=g.getElementsByTagName("head")[0]||"";a.body=g.body||"";a.ref=g.getElementsByTagName("script")[0]||"";a.callback=b||function(){};a.loadStyle=function(b){var c=g.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.head.appendChild(c)};a.loadScript=function(b){var c=g.createElement("script");c.type="text/javascript";c.async=!0;c.src=a.js[b];c.onload=function(){++b<a.js.length?a.loadScript(b):a.callback()};
a.head.appendChild(c);a.ref.parentNode?a.ref.parentNode.insertBefore(c,a.ref):(a.body||a.head).appendChild(c)};var c,d;c=0;for(d=a.files.length;c<d;c+=1)/\.js$|\.js\?/.test(a.files[c])&&a.js.push(a.files[c]),/\.css$|\.css\?|\/css\?/.test(a.files[c])&&a.loadStyle(a.files[c]);c=d=null;0<a.js.length?a.loadScript(0):a.callback()}})("undefined"!==typeof window?window:this,document);
(function(f,g){var e=function(){var a="ontouchstart"in g[b]||"",c="onwheel"in g.createElement("div")||void 0!==g.onmousewheel||"",e=g.title||"",p=navigator.userAgent||"",r=function(){var a=new Date,b=a.getDate(),c=a.getFullYear(),a=a.getMonth(),a=a+1;10>b&&(b="0"+b);10>a&&(a="0"+a);return c+"-"+a+"-"+b}(),h="";p&&f.platform&&(h=platform.description||"",g.title=e+" ["+(r?" "+r:"")+(h?" "+h:"")+(a||c?" with":"")+(a?" touch":"")+(a&&c?",":"")+(c?" mousewheel":"")+"]");var m=g.getElementById("zoomwall")||
"",a=new Headers;fetch("./libs/picturewall/json/zoomwall.json",{headers:a,credentials:"same-origin"}).then(function(a){if(a.ok)return a.text();throw Error("cannot fetch","./libs/picturewall/json/zoomwall.json");}).then(function(a){(new Promise(function(b,c){var d;try{d=JSON.parse(a);if(!d[0].highres)throw Error("incomplete JSON data: no highres");if(!d[0].src)throw Error("incomplete JSON data: no src");}catch(e){console.log("cannot init generateGallery",e);return}var k=g.createDocumentFragment(),
f;for(f in d)if(d.hasOwnProperty(f)&&d[f].src&&d[f].highres){var h=g.createElement("img");if(/^([0-9]+)(\x|\ )([0-9]+)$/.test(d[f].src))h.src=["data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20",d[f].src.replace("x","%20"),"%27%2F%3E"].join("");else{var l=new Image;l.src=d[f].src;var p=l.naturalWidth,l=l.naturalHeight;h.src=p&&l?["data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20",
p,"%20",l,"%27%2F%3E"].join(""):"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%201440%20810%27%2F%3E"}h.dataset.highres=d[f].highres;h.classList.add("data-src-img");h.alt="";k.appendChild(h);k.appendChild(g.createTextNode("\n"))}m.appendChild(k)?b():c()})).then(function(a){return a}).then(function(a){var b;b=setTimeout(function(){clearTimeout(b);b=null;zoomwall.create(m,!0,"highres")},100)}).then(function(a){var b;b=setTimeout(function(){clearTimeout(b);
b=null;echo("data-src-img","highres")},200)})["catch"](function(a){console.log("Cannot create zoomwall gallery",a)})})["catch"](function(a){console.log("cannot parse","./libs/picturewall/json/zoomwall.json")})},b="documentElement",a=["./libs/picturewall/css/bundle.min.css"],c=function(a){var b=f.location.protocol||"";return"http:"===b?"http":"https:"===b?"https":a?"http":""}(!0);"classList"in g.createElement("_")||a.push(c+"://cdn.jsdelivr.net/npm/classlist.js@1.1.20150312/classList.min.js");"undefined"!==
typeof f.Element&&"dataset"in g[b]||a.push(c+"://cdn.jsdelivr.net/npm/element-dataset@2.2.6/lib/browser/index.cjs.min.js");(function(){var a=!1;try{var b=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});f.addEventListener("test",function(){},b)}catch(c){}return a})()||a.push(c+"://cdn.jsdelivr.net/npm/dom4@1.8.5/build/dom4.max.min.js");f.Promise||a.push(c+"://cdn.jsdelivr.net/es6-promise-polyfill/1.2.0/promise.min.js");f.fetch||a.push(c+"://cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js");
a.push(c+"://cdn.jsdelivr.net/npm/platform@1.3.4/platform.min.js");new loadJsCss([c+"://fonts.googleapis.com/css?family=Roboto:400&subset=cyrillic"],function(){var b,c=function(){clearInterval(b);b=null;new loadJsCss(a,e)},f=function(){doesFontExist("Roboto")&&c()};(function(){var a=g.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))})()?b=setInterval(f,100):(b=null,c())})})("undefined"!==typeof window?window:this,document);
//# sourceMappingURL=bundle.min.js.map
